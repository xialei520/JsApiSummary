<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        //获取当前时间
        var time = new Date();
        console.log(time);//Thu Jun 14 2018 15:51:18 GMT+0800 (中国标准时间)

        //当前时间转时间戳
        var t1 = Date.parse(time);
        var t2 = time.getTime();
        console.log(t1 + "," + t2);//1528963236000,1528963236696

        //当前时间转年月日
        var ymd = time.toLocaleDateString();
        console.log(ymd);//2018/6/14

        //毫秒数转年月日
        time.setTime(t1);
        var y = time.getFullYear();
        var m = time.getMonth() + 1;
        m = m < 10 ? ('0' + m) : m;
        var d = time.getDate();
        d = d < 10 ? ('0' + d) : d;
        var h = time.getHours();
        h = h < 10 ? ('0' + h) : h;
        var minute = time.getMinutes();
        var second = time.getSeconds();
        minute = minute < 10 ? ('0' + minute) : minute;
        second = second < 10 ? ('0' + second) : second;
        console.log(y + '年' + m + '月' + d + '日' + h + '时' + minute + '分' + second + '秒')


        //传入过去的毫秒数返回距离现在的时间
        console.log(getregtime(1528963236000))
        function getregtime(time) {
            var currentTime = Date.parse(new Date());
            console.log(new Date().toLocaleDateString()); //显示当前年月日
            console.log(Date.parse(new Date().toLocaleDateString())); //将当日凌晨时间转为毫秒数
            console.log(Date.parse(new Date())) //将当前时间转化为毫秒数
            d_day = time;
            var currentDate = Date.parse(new Date().toLocaleDateString());
            var day = ((currentDate - d_day) / 1000 / 3600 / 24); //计算日期
            var hour = (parseInt((currentTime - d_day) / 1000 / 3600)); //计算小时
            var minutes = (parseInt((currentTime - d_day) / 1000 / 60)); //计算分钟
            var seconds = (parseInt((currentTime - d_day) / 1000)); //计算秒
            if (day >= 7) {
                var newtime = formatDateTime(time);
            } else if (day >= 2) {
                var newtime = Math.floor(day) + "天前";
            } else if (day >= 1 && day < 2) {
                var newtime = "前天";
            } else if (day > 0 && day < 1) {
                var newtime = "昨天";
            } else if (hour > 0 && hour < 24) {
                var newtime = parseInt(hour) + "小时前";
            } else if (minutes > 0 && minutes < 60) {
                var newtime = parseInt(minutes) + "分钟前"
            } else if (seconds > 0 && seconds < 60) {
                var newtime = parseInt(seconds) + "秒前";
            }
            return newtime;
        }
        function formatDateTime(timeStamp) {
            var date = new Date();
            date.setTime(timeStamp * 1000);
            var y = date.getFullYear();
            var m = date.getMonth() + 1;
            m = m < 10 ? ('0' + m) : m;
            var d = date.getDate();
            d = d < 10 ? ('0' + d) : d;
            var h = date.getHours();
            h = h < 10 ? ('0' + h) : h;
            var minute = date.getMinutes();
            var second = date.getSeconds();
            minute = minute < 10 ? ('0' + minute) : minute;
            second = second < 10 ? ('0' + second) : second;
            //return y + '-' + m + '-' + d + ' ' + h + ':' + minute + ':' + second;
            if (new Date().getFullYear() == y) {
                return m + '-' + d;
            } else {
                return y + '-' + m + '-' + d;
            }
        };

        //当午夜12点时，执行函数
        var secondi = setInterval(function () {
            var myDate = new Date();
            var h = myDate.getHours(); // 获取当前小时数(0-23)
            var m = myDate.getMinutes(); // 获取当前分钟数(0-59)
            var s = myDate.getSeconds();
            //console.log(h+'-'+m+'-'+s);
            if (h == 0 && m == 0 && s == 0) {
                console.log("开始执行！")
            }
        }, 1000);
    </script>
</body>

</html>